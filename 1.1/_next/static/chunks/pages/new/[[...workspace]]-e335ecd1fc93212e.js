(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{4873:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new/[[...workspace]]",function(){return a(6888)}])},6888:function(e,s,a){"use strict";a.r(s),a.d(s,{__N_SSG:function(){return r},default:function(){return n}});var l=a(5893),t=a(7294),o=a(2556),i=a(1163),r=!0;function n(e){var s,a;let{workspace:r}=e,n=(0,i.useRouter)(),d=(0,t.useMemo)(()=>(r.compatibility||[]).map(e=>{var s;return{value:e.image,label:"".concat(e.version," — ").concat(e.image),version:e.version,available_tags:e.available_tags||[],uncompressed_size_mb:null!==(s=e.uncompressed_size_mb)&&void 0!==s?s:null}}),[r.compatibility]),[c,m]=(0,t.useState)(d[0]||null),x=(0,t.useMemo)(()=>(r.categories||[]).map(e=>({value:e,label:e})),[r.categories]),u=(0,t.useMemo)(()=>(r.architecture||[]).map(e=>({value:e,label:e})),[r.architecture]),[b,p]=(0,t.useState)(x),[h,v]=(0,t.useState)(u),[g,f]=(0,t.useState)(r.friendly_name||""),[j,N]=(0,t.useState)(r.description||""),w=(null==c?void 0:c.value)||"",_=(0,t.useMemo)(()=>({friendly_name:g,image_src:r.image_src||"",description:j,docker_registry:"https://index.docker.io/v1/",categories:b.map(e=>e.value),architecture:h.map(e=>e.value),enabled:!0,image_type:"Container",compatibility:(r.compatibility||[]).map(e=>({version:e.version,image:e.image,...null!=e.uncompressed_size_mb?{uncompressed_size_mb:e.uncompressed_size_mb}:{},...e.available_tags?{available_tags:e.available_tags}:{}}))}),[g,j,b,h,r.compatibility,r.image_src]),y=(0,t.useMemo)(()=>({control:(e,s)=>({...e,minHeight:44,backgroundColor:"#f8fafc",borderColor:s.isFocused?"#94a3b8":"#cbd5e1",boxShadow:s.isFocused?"0 0 0 2px rgba(148,163,184,0.35)":"none",borderRadius:10,":hover":{borderColor:"#94a3b8"}}),menu:e=>({...e,borderRadius:10,overflow:"hidden",border:"1px solid #cbd5e1"}),option:(e,s)=>({...e,backgroundColor:s.isSelected?"#cbd5e1":s.isFocused?"#e2e8f0":"white",color:"#0f172a",cursor:"pointer"}),multiValue:e=>({...e,backgroundColor:"#e2e8f0",borderRadius:999,paddingLeft:6,paddingRight:6}),multiValueLabel:e=>({...e,color:"#0f172a",fontWeight:600,padding:0,paddingRight:6}),multiValueRemove:e=>({...e,borderRadius:999,":hover":{backgroundColor:"#cbd5e1",color:"#0f172a"}}),placeholder:e=>({...e,color:"#64748b"})}),[]);return(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[(0,l.jsxs)("section",{className:"min-h-[calc(100vh-120px)] bg-slate-200/70 px-10 py-10",children:[(0,l.jsx)("h1",{className:"text-4xl font-semibold text-slate-800",children:"Add Workspace"}),(0,l.jsx)("p",{className:"mt-3 max-w-xl text-slate-600",children:"Generate a workspace JSON and see what settings are required to add this workspace into Kasm."}),(0,l.jsxs)("div",{className:"mt-10 space-y-8 max-w-2xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700",children:"Friendly Name"}),(0,l.jsx)("input",{className:"mt-2 w-full rounded-xl border border-slate-300 bg-slate-50 px-4 py-3 text-slate-900 shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400/40",value:g,onChange:e=>f(e.target.value)}),(0,l.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"This is the name that will show for users"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700",children:"Categories"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(o.ZP,{instanceId:"categories",styles:y,isMulti:!0,options:x,value:b,onChange:e=>p(e||[])})}),(0,l.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"You can select from available options or create new ones."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700",children:"Description"}),(0,l.jsx)("textarea",{className:"mt-2 w-full min-h-[90px] rounded-xl border border-slate-300 bg-slate-50 px-4 py-3 text-slate-900 shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400/40",value:j,onChange:e=>N(e.target.value)}),(0,l.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"A short description about the workspace"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700",children:"Docker Image"}),(0,l.jsx)("input",{className:"mt-2 w-full rounded-xl border border-slate-300 bg-slate-50 px-4 py-3 text-slate-900 shadow-sm",value:w||"undefined",readOnly:!0}),(0,l.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"Pick a compatibility entry below to populate the image tag."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700",children:"Architecture"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(o.ZP,{instanceId:"arch",styles:y,isMulti:!0,options:u,value:h,onChange:e=>v(e||[])})}),(0,l.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"You can select from available options or create new ones."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-slate-700",children:"Install"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(o.ZP,{instanceId:"compat",styles:y,options:d,value:c,onChange:m,isSearchable:!0,placeholder:"Select a Kasm version…"})}),(null==c?void 0:null===(s=c.available_tags)||void 0===s?void 0:s.length)?(0,l.jsxs)("div",{className:"mt-3 text-sm text-slate-700",children:[(0,l.jsx)("div",{className:"font-semibold",children:"Available tags"}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:c.available_tags.slice(0,12).map(e=>(0,l.jsx)("span",{className:"rounded-full bg-slate-100 border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700",children:e},e))})]}):null,(null==c?void 0:c.uncompressed_size_mb)!=null?(0,l.jsxs)("p",{className:"mt-2 text-sm text-slate-600",children:["Uncompressed size: ",(0,l.jsxs)("span",{className:"font-semibold",children:[c.uncompressed_size_mb," MB"]})]}):null]})]})]}),(0,l.jsxs)("section",{className:"min-h-[calc(100vh-120px)] bg-slate-50 px-10 py-10",children:[(0,l.jsxs)("div",{className:"mx-auto max-w-xl rounded-2xl bg-slate-200/60 border border-slate-300 shadow-sm overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 p-5",children:[(0,l.jsx)("div",{className:"h-12 w-12 rounded-xl bg-white/70 border border-slate-300 flex items-center justify-center text-slate-500 font-bold",children:(null==g?void 0:null===(a=g.slice(0,1))||void 0===a?void 0:a.toUpperCase())||"W"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lg font-bold text-slate-800",children:g||"Workspace"}),(0,l.jsx)("div",{className:"text-sm text-slate-600",children:"SquirrelWorks LLC"})]})]}),(0,l.jsx)("div",{className:"px-5 pb-5",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[h.map(e=>(0,l.jsx)("span",{className:"rounded-full bg-slate-100 border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700",children:e.value},e.value)),b.map(e=>(0,l.jsx)("span",{className:"rounded-full bg-slate-100 border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700",children:e.value},e.value))]})})]}),(0,l.jsxs)("div",{className:"mx-auto mt-8 max-w-3xl",children:[(0,l.jsx)("pre",{className:"rounded-2xl border border-slate-200 bg-white p-6 text-xs text-slate-800 overflow-auto shadow-sm",children:JSON.stringify(_,null,2)}),(0,l.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[(0,l.jsx)("button",{onClick:()=>(function(e,s){let a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),l=URL.createObjectURL(a),t=document.createElement("a");t.href=l,t.download=e,document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(l)})("".concat(g||"workspace",".json"),_),className:"rounded-xl bg-slate-800 px-5 py-3 text-sm font-bold text-white hover:bg-slate-700",children:"Download JSON"}),(0,l.jsx)("button",{onClick:async()=>{w&&await navigator.clipboard.writeText(w)},className:"rounded-xl border border-slate-300 bg-white px-5 py-3 text-sm font-bold text-slate-800 hover:bg-slate-100",children:"Copy Docker Image"}),(0,l.jsx)("button",{onClick:()=>n.push(n.basePath+"/"),className:"rounded-xl border border-slate-300 bg-white px-5 py-3 text-sm font-bold text-slate-800 hover:bg-slate-100",children:"Back"})]})]})]})]})})}}},function(e){e.O(0,[556,888,774,179],function(){return e(e.s=4873)}),_N_E=e.O()}]);